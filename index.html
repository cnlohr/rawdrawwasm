 <!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Test</title>
		<style>
			body { background-color: #000080; }
			document : {overflow: hidden; width=100%; height=100%;}
		</style>
	</head>
	<body>
		<div STYLE="position:absolute;width:640;z-index:10;color:white;a:red">
			This is a demonstration of rawdrawwasm, a minimal technique to use C with rawdraw with WASM and without Emscripten.
			This file is a single-file HTML file. Thanks to @zNoctum and @redline2644.  Check out the project <A HREF=https://github.com/cnlohr/rawdrawwasm/ style="color:red">here</a>.
		</div>
		<div STYLE="positon:absolute;z-index:3">
			<canvas width=500 height=500 id=canvas></canvas>
		</div>
		<script>
var blob=atob("AGFzbQEAAAABNgpgAn9/AGABfwBgAABgA39/fwBgBH9/f38AYAF8AXxgBH99fX0AYAABf2ABfwF/ YAN9fX0BfQKvAg8DZW52FkNORkdDbGVhckZyYW1lSW50ZXJuYWwAAQNlbnYXQ05GR1N3YXBCdWZm ZXJzSW50ZXJuYWwAAgNlbnYNQ05GR1RhY2tQaXhlbAAAA2Vudg9DTkZHVGFja1NlZ21lbnQABANl bnYTQ05GR1NldHVwRnVsbHNjcmVlbgAAA2VudgZwcmludHMAAQNlbnYPQ05GR0hhbmRsZUlucHV0 AAIDZW52EENORkdTZXRMaW5lV2lkdGgAAQNlbnYJQ05GR0NvbG9yAAgDZW52EUNORkdHZXREaW1l bnNpb25zAAADZW52EUNORkdUYWNrUmVjdGFuZ2xlAAQDZW52DENORkdUYWNrUG9seQAAA2VudgNj b3MABQNlbnYDc2luAAUDZW52Bm1lbW9yeQIAAgMNDAQAAwcJBgMAAwECAQYSA38BQaDqBAt/AUEA C38BQQALB5ABCAlIYW5kbGVLZXkADwxIYW5kbGVCdXR0b24ADgxIYW5kbGVNb3Rpb24AEARtYWlu ABEVYXN5bmNpZnlfc3RhcnRfdW53aW5kABcUYXN5bmNpZnlfc3RvcF91bndpbmQAGBVhc3luY2lm eV9zdGFydF9yZXdpbmQAGRRhc3luY2lmeV9zdG9wX3Jld2luZAAYCvQmDAMAAQsDAAELEwBB0Bcg ATYCAEGEygAgADYCAAvsHwMOfwl9BXwjAUECRgRAIwIjAigCAEGMf2o2AgAjAigCACIAKAIAIQEg ACgCBCECIAAqAgghDiAAKAIQIQQgACoCFCEPIAAoAhghBSAAKwIcIRcgACgCJCEIIAAoAighByAA KgIsIREgACoCMCEQIAAoAjQhCSAAKAI4IQogACoCPCETIAAqAkAhEiAAKwJEIRggACgCTCELIAAq AlAhFCAAKwJUIRogACoCXCEVIAAqAmAhFiAAKwJkIRsgACgCbCEMIAAoAnAhDSAAKAIMIQALAn8j AUECRgRAIwIjAigCAEF8ajYCACMCKAIAKAIAIQYLIwFFBEAjAEHwAGsiAiQAQeAXQQE6AAALIAZF QQEjARsEQEGACEEAEARBACMBQQFGDQEaCyMBRQRAA0AgCkEoRyIBBEAgCrIhE0EAIQUDQCAFQShH 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 AigCACMCKAIESwRAAAsLFQBBACQBIwIoAgAjAigCBEsEQAALCxkAQQIkASAAJAIjAigCACMCKAIE SwRAAAsLC9oPAwBBgAgLQ1Rlc3QgQmVuY2gATWFpbiBzdGFydGVkLiAgVGhpcyB3aWxsIGFwcGVh ciBpbiB5b3VyIGJyb3dzZXIgY29uc29sZS4AQdAIC/0O//8AAAgAEAAYAB8AKQAyADMA/////zkA QgD//0sAUwBcAGAAZABsAHIAewCEAIkAkwCYAJ4AowCpAKwAsgC2AP//ugC9AMEAyQDRANkA4gDk AOgA7AD0APgA+gD8AP0A/wAFAQoBEAEWARsBIQEnASwBNQE8AT4BQQFEAUgBSwFRAVkBYAFqAXAB dwF+AYQBjAGSAZgBnQGmAakBrgGzAboBwQHKAdIB2AHcAeAB5QHsAfQB+wEAAgQCBgIKAg0CDwIR AhgCHQIiAicCLQI0AjwCQgJFAkoCUQJTAlwCYgJnAm0CcwJ4An4CggKIAo0ClAKYAp4CogKoAqwC sgK2Av////////////////////////////////////////////////////////////////////// //////////////+8Ar8CxwLOAtsC5ALoAvIC9AL4Av4CBAMHAwkDEQMTAxgDHgMjAysDLQM0AzsD PAM/A0EDRgNMA1UDXgNqA3ADeQOCA4wDlwOgA6sDtwPAA8kD0gPcA+UD7QP1A/4DBgQPBBcEHgQl BC4ENwQ+BEIESwRRBFcEXgRkBG0EdAR+BIcEkASaBKUErgS5BMYEzwTXBN8E6ATwBPQE+AT9BAEF CgUUBRsFIgUqBTMFOgU+BUUFTQVVBV4FZgVuBXUF//8ACSApAyMUiwAJICkEJBOMASEjFAMJEZoR IiMUAwKZASEjCQMpAwkSnAMrExwjIhECi5oaASEjA4kDISohGQMUI5oBECESCRIcA6sCAxsCGhMQ qQErAykCESITigAiBIggAiSoARApEBQLFKsACwwgK6wAKAACKhAcIKwBISMDCSAQFIwDIyQEiwEQ KRAUCxQrBKwBGCEQnAMcIxwQnAIiGSKbAioCGQKbAQKqAiIRAhOqESICmQITIooQG5wQCSCZEBwg LAEpA6shEAEjFAsQnAAJIywEAyGoIRABEgMUKwKsEJkQAQOcECEjnAErERshCwKqAioRmwSbAqqc A6kAICQECJoBEBwErAEQISIErAAgJAwSqgACKiCsIAACIiSMIAIiJASKACAhEpwADAAgLAQsAqoA AiIgCCKMGZsZE4wgAqwBKQOrACKMARAhEhucIQEEJCISE6sEARAhLAKqAAQUIxIKEiEQiCMUAwEQ qQAQISMUBIgABCwAKAKaAAwAKAKaIRABAxQjIpoADCAsAqoAKBAcBKwAICMUiwAMAhIhKBIjrAAE rAQAESCsBAAqIKwBECEjFAOJAAwAECESigEQISMUAwkEmwAMABAhEgKsIRABIxSLACgQnAAEJKgA AxQjqAAELBQbJKgAASMsBAMhqAABEhwSIagAIAIErBAABJwBqxAgJJwBEKkErACZAgQkKiMSigAE JCKKJAQDEqogJAQCqiQEAiIjmwQJAhoBEKkjEgMUIyQVjAAMAxIjrBkSnCojJBWMAAwDEyoTrBCc AgwCGxIcEiOsAgwDEiOsAiIkBIoCDQQkIooCBCwlIooCDAMSqiICAyMkjBEcAqoCBBQrJKoCAxQj qgIDFBoTJKoCLASqAgMcIiONAiIErCAQFCwSihAZE5wAEBQMEqoBEBGoAwQkIxKLGBGcIRABAhMq EJsRAAQkKwKaAQoRKSIrAxsCESITigARKBEcAioDqxAaE50gAAIRKgITIiSMCKggEBGpECkgIRGY EQIbIRKrASGqEqoQICEZEhgRqgCoARAhEokCKhEbA6sBECEDqwEQIRIKEiOLEagCDQQUKyKsFBAB GhAgrJoUFY0gqRAgIRGYARILESKbAAkCKBITKyKsAAkCKBIiExSsABARCRECKBITKyKsGBESAxSr BAIRIiwDKxCpBAIRIiwDKwGYBAIRIiwDKwEQqQQCESIsAysBEBGoBAIRIiwDKwioBAIRIiwDKwAg EYgADAIqABkQHBAoFKwjFAMBECkUFY0CKgIELAMbAJkCKgIELAMbEagCKgIELAMbARCpAioCBCwD GwioAioSHAQsAJkCKhIcBCwRqAIqEhwELAEQqQIqEhwELCiIABAhIxQECAKaBAIkKgEQEagCIiQE CgCZAiIkBAoRqAIiJAQKESgAmQIiJAQKARARqAEhJAQJCKgBKwOpARAhIxQDCQOpAQQkKRGoAQQk KQCZAgQkKgEQqQEEJCkIqAECExwTIikRqAAMAREiE4sADQAQIRoCIiSMAgQkKiMSCgCZAgQkKiMS ChGoAgQkKiMSCgEQqQIEJCojEgoBEBGoAgQkKiMSCgmpAgQkKiMSCgEQIYkCGwIELBIcEioTKyKr AwQsAxIqFBWNJAQCIiMbAJkkBAIiIxsRqCQEAiIjGwEQqSQEAiIjGwmpEhwAmRIcEagSHAEQqRIc CakAKhEoAiIkBIoCDAMSIywBEBGoAgQkIgoAmQIEJCIKEagCBCQiCgEQqQIEJCIKARARqAIEJCIK CakZAiqbAgQkIgoEqgIEFCskKgCZAgQUKyQqEagCBBQrJCoBEKkCBBQrJCoJqQIDHCIjDRGoAAwC ESITigIDHCIjDQmpAEHQFwsGZAAAACAlAC8JcHJvZHVjZXJzAQxwcm9jZXNzZWQtYnkBBWNsYW5n DzEwLjAuMC00dWJ1bnR1MQ==");var memory=new WebAssembly.Memory({initial:200});var HEAP8=new Int8Array(memory.buffer);var HEAPU8=new Uint8Array(memory.buffer);var HEAP16=new Int16Array(memory.buffer);var HEAPU16=new Uint16Array(memory.buffer);var HEAP32=new Uint32Array(memory.buffer);var HEAPU32=new Uint32Array(memory.buffer);var HEAPF32=new Float32Array(memory.buffer);var HEAPF64=new Float64Array(memory.buffer);let toUtf8Decoder=new TextDecoder("utf-8");function toUTF8(ptr){var len=0|0;ptr|=0;for(var i=ptr;HEAPU8[i]!=0;i++)len++;return toUtf8Decoder.decode(HEAPU8.subarray(ptr,ptr+len))}let wasmExports;const DATA_ADDR=16;let sleeping=false;var fullscreen=false;var canvas=document.getElementById("canvas");var wgl=canvas.getContext("webgl");var wgl_rdcolor=new Uint8Array(4);var wgl_shader=null;var wgl_blit=null;var wgl_tex=null;function wgl_makeShader(vertText,fragText){var vert=wgl.createShader(wgl.VERTEX_SHADER);wgl.shaderSource(vert,vertText);wgl.compileShader(vert);if(!wgl.getShaderParameter(vert,wgl.COMPILE_STATUS)){alert(wgl.getShaderInfoLog(vert))}var frag=wgl.createShader(wgl.FRAGMENT_SHADER);wgl.shaderSource(frag,fragText);wgl.compileShader(frag);if(!wgl.getShaderParameter(frag,wgl.COMPILE_STATUS)){alert(wgl.getShaderInfoLog(frag))}var ret=wgl.createProgram();wgl.attachShader(ret,frag);wgl.attachShader(ret,vert);wgl.linkProgram(ret);wgl.bindAttribLocation(ret,0,"a0");wgl.bindAttribLocation(ret,1,"a1");return ret}{wgl_shader=wgl_makeShader("uniform vec2 sw, sa; attribute vec2 a0; attribute vec4 a1; varying vec4 vc; void main() { gl_Position = vec4( a0*sw-sa, 0.0, 0.5 ); vc = a1; }","precision mediump float; varying vec4 vc; void main() { gl_FragColor = vec4(vc.xyz,1.0); }");swloc=wgl.getUniformLocation(wgl_shader,"sw");saloc=wgl.getUniformLocation(wgl_shader,"sa");wgl_blit=wgl_makeShader("uniform vec2 sw, sa;attribute vec2 a0; attribute vec4 a1; varying vec2 tc; void main() { gl_Position = vec4( a0*sw-sa, 0.0, 0.5 ); tc = a1.xy; }","precision mediump float; varying vec2 tc; uniform sampler2D tex; void main() { gl_FragColor = texture2D(tex,tc);}");swlocBlit=wgl.getUniformLocation(wgl_blit,"sw");salocBlit=wgl.getUniformLocation(wgl_blit,"sa");wgl.useProgram(wgl_shader);var arraybufferV=wgl.createBuffer();var arraybufferC=wgl.createBuffer();wgl.enableVertexAttribArray(0);wgl.enableVertexAttribArray(1)}function FrameStart(){if(fullscreen){wgl.viewportWidth=canvas.width=window.innerWidth;wgl.viewportHeight=canvas.height=window.innerHeight}wgl.viewport(0,0,wgl.viewportWidth,wgl.viewportHeight);wgl.uniform2f(swloc,1/wgl.viewportWidth,-1/wgl.viewportHeight);wgl.uniform2f(saloc,.5+.5/wgl.viewportWidth,-.5-.5/wgl.viewportHeight)}var wgl_dcount;var wgl_bdt;var wgl_bds=32768|0;var wgl_bdal=new Float32Array(wgl_bds*2);var wgl_bdap=new Int16Array(wgl_bds*2);var wgl_bdac=new Uint8Array(wgl_bds*4);var wgl_last_width=1;function WGLFBuffer(){wgl.bindBuffer(wgl.ARRAY_BUFFER,arraybufferV);if(wgl_bdt==wgl.TRIANGLES){wgl.bufferData(wgl.ARRAY_BUFFER,wgl_bdap,wgl.DYNAMIC_DRAW);wgl.vertexAttribPointer(0,2,wgl.SHORT,false,0,0)}else{wgl.bufferData(wgl.ARRAY_BUFFER,wgl_bdal,wgl.DYNAMIC_DRAW);wgl.vertexAttribPointer(0,2,wgl.FLOAT,false,0,0)}wgl.bindBuffer(wgl.ARRAY_BUFFER,arraybufferC);wgl.bufferData(wgl.ARRAY_BUFFER,wgl_bdac,wgl.DYNAMIC_DRAW);wgl.vertexAttribPointer(1,4,wgl.UNSIGNED_BYTE,true,0,0);wgl.drawArrays(wgl_bdt,0,wgl_dcount);wgl_dcount=0}const imports={env:{CNFGTackSegment:(x1,y1,x2,y2)=>{if(wgl_bdt!=wgl.LINES||wgl_dcount>wgl_bds-4)WGLFBuffer();wgl_bdt=wgl.LINES;wgl_bdal.set([x1,y1,x2,y2],wgl_dcount*2);wgl_bdac.set(wgl_rdcolor,wgl_dcount*4);wgl_bdac.set(wgl_rdcolor,wgl_dcount*4+4);wgl_dcount+=2},CNFGTackPixel:(x1,y1)=>{if(wgl_bdt!=wgl.LINES||wgl_dcount>wgl_bds-4)WGLFBuffer();wgl_bdt=wgl.LINES;wgl_bdal.set([x1,y1-wgl_last_width/2,x1,y1+wgl_last_width/2],wgl_dcount*2);wgl_bdac.set(wgl_rdcolor,wgl_dcount*4);wgl_bdac.set(wgl_rdcolor,wgl_dcount*4+4);wgl_dcount+=2},CNFGTackRectangle:(x1,y1,x2,y2)=>{if(wgl_bdt!=wgl.TRIANGLES||wgl_dcount>wgl_bds-16)WGLFBuffer();wgl_bdt=wgl.TRIANGLES;wgl_bdap.set([x1,y1,x2,y1,x2,y2,x1,y1,x2,y2,x1,y2],wgl_dcount*2);wgl_bdac.set(wgl_rdcolor,wgl_dcount*4+0);wgl_bdac.set(wgl_rdcolor,wgl_dcount*4+4);wgl_bdac.set(wgl_rdcolor,wgl_dcount*4+8);wgl_bdac.set(wgl_rdcolor,wgl_dcount*4+12);wgl_bdac.set(wgl_rdcolor,wgl_dcount*4+16);wgl_bdac.set(wgl_rdcolor,wgl_dcount*4+20);wgl_dcount+=6},CNFGTackPoly:(vertices,numverts)=>{var i=0|0;numverts|=0;vertices|=0;if(numverts<1)return;wgl.enableVertexAttribArray(0);var outverts=(numverts-2)*3;if(wgl_bdt!=wgl.TRIANGLES||wgl_dcount>wgl_bds-outverts*2)WGLFBuffer();var i=0|0;for(;i<numverts-2;i++){wgl_bdac.set(wgl_rdcolor,wgl_dcount*4+0);wgl_bdac.set(wgl_rdcolor,wgl_dcount*4+4);wgl_bdac.set(wgl_rdcolor,wgl_dcount*4+8);wgl_bdap.set(HEAP16.slice(vertices>>1,(vertices>>1)+6),wgl_dcount*2);wgl_dcount+=3}wgl_bdt=wgl.TRIANGLES},CNFGColor:color=>{wgl_rdcolor[0]=color&255;wgl_rdcolor[1]=color>>8&255;wgl_rdcolor[2]=color>>16&255;wgl_rdcolor[3]=color>>24&255},CNFGSetup:(title,w,h)=>{document.title=toUTF8(title);wgl.viewportWidth=canvas.width=w;wgl.viewportHeight=canvas.height=h;FrameStart();fullscreen=false},CNFGSetupFullscreen:(title,w,h)=>{document.title=toUTF8(title);wgl.viewportWidth=canvas.width=w;wgl.viewportHeight=canvas.height=h;FrameStart();canvas.style="position:absolute; top:0; left:0;";fullscreen=true},CNFGClearFrameInternal:color=>{wgl.clearColor((color&255)/255,(color>>8&255)/255,(color>>16&255)/255,(color>>24&255)/255);wgl.clear(wgl.COLOR_BUFFER_BIT|wgl.COLOR_DEPTH_BIT)},CNFGGetDimensions:(pw,ph)=>{HEAP16[pw>>1]=canvas.width;HEAP16[ph>>1]=canvas.height},CNFGHandleInput:()=>{},CNFGUpdateScreenWithBitmapInternal:(memptr,w,h)=>{if(w<=0||h<=0)return;if(wgl_dcount>0)WGLFBuffer();wgl.useProgram(wgl_blit);if(wgl_tex==null)wgl_tex=wgl.createTexture();wgl.activeTexture(wgl.TEXTURE0);wgl.bindTexture(wgl.TEXTURE_2D,wgl_tex);wgl_bdt=wgl.TRIANGLES;wgl_bdap.set([0,0,w,0,w,h,0,0,w,h,0,h],0);wgl_bdac.set([0,0,0,0,255,0,0,0,255,255,0,0,0,0,0,0,255,255,0,0,0,255,0,0],0);wgl_dcount=6;wgl.uniform2f(swlocBlit,1/wgl.viewportWidth,-1/wgl.viewportHeight);wgl.uniform2f(salocBlit,.5,-.5);wgl.texParameteri(wgl.TEXTURE_2D,wgl.TEXTURE_WRAP_S,wgl.CLAMP_TO_EDGE);wgl.texParameteri(wgl.TEXTURE_2D,wgl.TEXTURE_WRAP_T,wgl.CLAMP_TO_EDGE);wgl.texParameteri(wgl.TEXTURE_2D,wgl.TEXTURE_MIN_FILTER,wgl.NEAREST);var img=new Image;wgl.texImage2D(wgl.TEXTURE_2D,0,wgl.RGBA,w,h,0,wgl.RGBA,wgl.UNSIGNED_BYTE,new Uint8Array(memory.buffer,memptr,w*h*4));WGLFBuffer();wgl.useProgram(wgl_shader)},CNFGFlushRender:WGLFBuffer,CNFGSetLineWidth:px=>{wgl_last_width=px;wgl.lineWidth(px)},CNFGSwapBuffersInternal:()=>{if(!sleeping){WGLFBuffer();HEAP32[DATA_ADDR>>2]=DATA_ADDR+8;HEAP32[DATA_ADDR+4>>2]=1024;wasmExports.asyncify_start_unwind(DATA_ADDR);sleeping=true;requestAnimationFrame(function(){FrameStart();wasmExports.asyncify_start_rewind(DATA_ADDR);wasmExports.main()})}else{wasmExports.asyncify_stop_rewind();sleeping=false}},OGGetAbsoluteTime:()=>{return(new Date).getTime()/1e3},Add1:i=>{return i+1},sin:Math.sin,cos:Math.cos,tan:Math.tan,sinf:Math.sin,cosf:Math.cos,tanf:Math.tan,OGUSleep:us=>{if(!sleeping){HEAP32[DATA_ADDR>>2]=DATA_ADDR+8;HEAP32[DATA_ADDR+4>>2]=1024;wasmExports.asyncify_start_unwind(DATA_ADDR);sleeping=true;setTimeout(function(){wasmExports.asyncify_start_rewind(DATA_ADDR);wasmExports.main()},us/1e3)}else{wasmExports.asyncify_stop_rewind();sleeping=false}},memory:memory,print:console.log,prints:str=>{console.log(toUTF8(str))}}};{var array=new Uint8Array(new ArrayBuffer(blob.length));var i=0|0;for(i=0;i<blob.length;i++){array[i]=blob.charCodeAt(i)}WebAssembly.instantiate(array,imports).then(function(wa){instance=wa.instance;wasmExports=instance.exports;if(instance.exports.HandleMotion){canvas.addEventListener("mousemove",e=>{instance.exports.HandleMotion(e.offsetX,e.offsetY,e.buttons)});canvas.addEventListener("touchmove",e=>{instance.exports.HandleMotion(e.touches[0].clientX,e.touches[0].clientY,1)})}if(instance.exports.HandleButton){canvas.addEventListener("mouseup",e=>{instance.exports.HandleButton(e.offsetX,e.offsetY,e.button,0)});canvas.addEventListener("mousedown",e=>{instance.exports.HandleButton(e.offsetX,e.offsetY,e.button,1)})}instance.exports.main()})}
		</script>
	</body>
</html>
